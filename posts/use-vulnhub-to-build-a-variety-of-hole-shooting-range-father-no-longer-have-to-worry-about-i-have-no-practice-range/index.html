<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>用Vulnhub来练习漏洞靶场(爸爸再也不用担心我没有靶场练习了) - F0rmat&#39;Blog</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
</head>
<body>
<header>
  <div>
    <h1><a href="https://getshe11.com/">F0rmat&#39;Blog</a></h1>
  </div>
  <nav></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>用Vulnhub来练习漏洞靶场(爸爸再也不用担心我没有靶场练习了)</h1>
  </div>
<div style="position: fixed; right:-30px; max-width:300px; overflow:auto; top: 1px; width: 300px; bottom:100px">

</div>
<div class="meta">
  <div>2018-05-03 17:04</div>
  <div>
    <span><a href="https://getshe11.com/tags/0day/">#0day</a></span>
      <span><a href="https://getshe11.com/tags/cve/">#CVE</a></span>
      <span><a href="https://getshe11.com/tags/vulnhub/">#Vulnhub</a></span>
      </div>
  </div>
<div class="content">
  <h2 id="0x01-前言">0x01 前言</h2>
<p><strong>Vulnhub</strong>它是一个提供各种漏洞环境的平台，里面大部分的环境是要用VMware或者VirtualBox打开运行的。
如果只是练习一些常见的漏洞可以看我另一篇用[Docker来搭建各种漏洞靶场(妈妈再也不用担心我没有靶场练习了)](<a href="https://getpass.cn/2018/03/14/Use">https://getpass.cn/2018/03/14/Use</a> Docker to build a variety of loopholes (my mother no longer has to worry about not having practiced in the shooting range)/)</p>
<h2 id="0x02-下载">0x02 下载</h2>
<p><a href="https://www.vulnhub.com">https://www.vulnhub.com</a>
里面有各种各样的镜像，可以下载到自己的机子上面练习。
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/1.png" alt="">
镜像的下载地址和描述、难度等级等
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/2.png" alt="">
随便点击下载，有些需要FQ才能下载，推荐官网的下载地址。
作为测试，我就下载<strong>JIS-CTF: VulnUpload</strong>作为演示吧</p>
<p>Download (Mirror): <a href="https://download.vulnhub.com/jisctf/JIS-CTF-VulnUpload-CTF01.ova">https://download.vulnhub.com/jisctf/JIS-CTF-VulnUpload-CTF01.ova</a></p>
<!-- raw HTML omitted -->
<h2 id="0x03-安装">0x03 安装</h2>
<p>下载完后，解压出来，会看到一个<strong>ovf</strong>后缀的文件
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/3.png" alt="">
打开VMware，点击打开，找到我们刚才解压的文件，选择ovf文件
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/4.png" alt="">
选择存放的位置，然后点击导入
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/5.png" alt="">
最后等待导入完成，导入速度看本机性能和镜像的大小
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/6.png" alt=""></p>
<h2 id="0x04-设置">0x04 设置</h2>
<p>导入完成后，我设置的网络模式是NAT的，因为我内网比较多机子，所以选择这个方便等下扫描。还有就是内存大小，如果本机内存小于4G的请修改内存到4G以下。
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/7.png" alt="">
我们点击开启虚拟机，到开机的页面我们回车选择第二个Ubuntu的高级选项（如果启动有网络正常的话可以直接正常开机，如果网络不正常可以按下面步骤操作）
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/8.png" alt="">
进到高级选项，我们再次回车选择第二个Linux内核版本的恢复模式
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/9.png" alt="">
等待系统启动完毕后，看到这个页面，我们继续回车进入
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/10.png" alt="">
回车后会弹出选择界面，我们选择root一行回车，然后再次回车进入命令行模式
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/11.png" alt="">
输入命令查看所以的网卡：<code>ifconfig -a</code>
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/12.png" alt="">
我的是<strong>ens33</strong>，然后继续输入命令 <code>vi /etc/network/interface</code>修改网络配置文件
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/13.png" alt="">
修改这两个地方，改成你的网卡名称，然后ctrl+x保存，最后输入<code>reboot</code>重启，OK！
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/14.png" alt=""></p>
<h2 id="0x05-完成任务吧">0x05 完成任务吧！</h2>
<p>作者给的描述是要我们找到靶机里面的5个flag</p>
<blockquote>
<p>Description: There are five flags on this machine. Try to find them. It takes 1.5 hour on average to find all flags.</p>
</blockquote>
<h3 id="1网络扫描">1.网络扫描</h3>
<p>可以使用<code>netdiscover -i 网卡名称</code>，或者用nmap来扫描：
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/15.png" alt="">
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/16.png" alt="">
得到靶机的ip之后，我们用nmap来扫描靶机的信息
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/17.png" alt=""></p>
<h3 id="2第一个flag">2.第一个flag</h3>
<p>我们从刚才扫描的信息得之robots.txt文件，我们查看下里面的内容
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/18.png" alt=""></p>
<p>我们看到一个敏感的字眼，地址栏输入http://ip/flag，得到第一个flag
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/19.png" alt=""></p>
<h3 id="3第二个flag">3.第二个flag</h3>
<p>地址栏输入http://ip/admin_area/,右键查看源码得到第二个flag
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/20.png" alt=""></p>
<h3 id="4第三个flag">4.第三个flag</h3>
<p>我们从刚才第二个flag的地方得到管理员的账号密码，地址栏打开http://ip/login.php登录
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/21.png" alt="">
可以看到是一个上传页面，我们写一句话木马上传
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/22.png" alt="">
我们用蚁剑来连接http://ip/uploaded_files/shell.php
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/23.png" alt="">
我们翻到<code>/var/www/html/</code>目录下面，看到一个hint.txt和flag.txt,flag.txt我们apache的组是无法进行然后操作的，但是hint.txt我们可以读取，
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/24.png" alt="">
得出flag的值
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/25.png" alt=""></p>
<h3 id="第四个flag">第四个flag</h3>
<p>刚才在第三个flag提示我们用technawi用去读取flag.txt文件，我们可以在隐藏文件中找到用户的信息</p>
<blockquote>
<p>try to find user technawi password to read the flag.txt file, you can find it in a hidden file ;)
我们启动shell的命令行模式，输入命令<code>find / -user 'technawi' 2&gt;/dev/null</code>,<strong>2&gt;/dev/null</strong>是过滤掉类似没有权限的信息
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/26.png" alt="">
同时我们也看到了一个特殊的文件**/etc/mysql/conf.d/credentials.txt** ，我们尝试去读一下里面的信息，得到flag
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/27.png" alt=""></p>
</blockquote>
<h3 id="最后一个flag">最后一个flag</h3>
<p>按照第四个flag的提示，我们用里面的账号密码去登录靶机<code>technawi@IP</code>
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/28.png" alt="">
然后去读取刚才flag.txt文件<code>cat /var/www/html/flag.txt</code> ，得到最后的flag
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/vulnhub/29.png" alt=""></p>
<h2 id="0x06-结束">0x06 结束</h2>
<p>不用自己搭建环境还是好的，毕竟搭环境遇到的问题可以浪费很多时间。</p>
<h2 id="0x07-参考">0x07 参考</h2>
<p><a href="https://www.vulnhub.com">https://www.vulnhub.com</a></p>
<p><a href="https://medium.com/@D00MFist/vulnhub-jis-ctf-vulnupload-bf3072d2ca85">https://medium.com/@D00MFist/vulnhub-jis-ctf-vulnupload-bf3072d2ca85</a></p>
</div>
<div style="position: fixed; right:50px; max-width:255px; overflow:auto; top: 120px; width: 220px; bottom:90px">










<div class="toc">

    <div class="page-header"><strong>目录</strong></div>

    <div id="page-scrollspy" class="toc-nav">

        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x01-%e5%89%8d%e8%a8%80">
                            0x01 前言
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x02-%e4%b8%8b%e8%bd%bd">
                            0x02 下载
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x03-%e5%ae%89%e8%a3%85">
                            0x03 安装
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x04-%e8%ae%be%e7%bd%ae">
                            0x04 设置
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x05-%e5%ae%8c%e6%88%90%e4%bb%bb%e5%8a%a1%e5%90%a7">
                            0x05 完成任务吧！
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#1%e7%bd%91%e7%bb%9c%e6%89%ab%e6%8f%8f">
                            1.网络扫描
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#2%e7%ac%ac%e4%b8%80%e4%b8%aaflag">
                            2.第一个flag
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#3%e7%ac%ac%e4%ba%8c%e4%b8%aaflag">
                            3.第二个flag
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#4%e7%ac%ac%e4%b8%89%e4%b8%aaflag">
                            4.第三个flag
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#%e7%ac%ac%e5%9b%9b%e4%b8%aaflag">
                            第四个flag
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#%e6%9c%80%e5%90%8e%e4%b8%80%e4%b8%aaflag">
                            最后一个flag
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x06-%e7%bb%93%e6%9d%9f">
                            0x06 结束
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x07-%e5%8f%82%e8%80%83">
                            0x07 参考
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        

    </div>

</div>



</div>

  </article>
</main>
<footer>
  <div>
    <div>&copy; 2021 F0rmat. <a href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC-BY-4.0</a></div>
  </div>
</footer>
</body>
</html>
