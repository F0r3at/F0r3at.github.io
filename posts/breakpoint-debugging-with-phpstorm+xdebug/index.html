<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>利用phpstorm&#43;xdebug进行断点调试 - F0rmat&#39;Blog</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
</head>
<body>
<header>
  <div>
    <h1><a href="https://getshe11.com/">F0rmat&#39;Blog</a></h1>
  </div>
  <nav></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>利用phpstorm&#43;xdebug进行断点调试</h1>
  </div>
<div style="position: fixed; right:-30px; max-width:300px; overflow:auto; top: 1px; width: 300px; bottom:100px">
<div class="container text-center mt-3">
    <iframe src="https://duckduckgo.com/search.html?site=https://getshe11.com/&prefill=" style="overflow:hidden;margin:0;padding:0;max-width:80%;height:40px;" frameborder="0"></iframe>
</div>
</div>
<div class="meta">
  <div>2018-04-10 10:17</div>
  <div>
    <span><a href="https://getshe11.com/tags/phpstorm/">#phpstorm</a></span>
      <span><a href="https://getshe11.com/tags/xdebug/">#xdebug</a></span>
      </div>
  </div>
<div class="content">
  <h2 id="0x01-前言">0x01 前言</h2>
<p>在代码审计中，有些程序用到框架之类的要想去分析一个一个看和输出调试比较麻烦，如今有了<code>xdebug</code>神器，就比较方便了。</p>
<h2 id="0x02-配置过程">0x02 配置过程</h2>
<h3 id="php的配置">php的配置</h3>
<p>我是用phpstudy的，所以在php目录下面都会有内置的插件：<code>phpStudy\PHPTutorial\php\php-5.6.27-nts\ext\php_xdebug.dll</code></p>
<!-- raw HTML omitted -->
<p>如果是其他环境的话可以去官网下载相对应的版本：https://xdebug.org/download.php
然后放在<code>ext</code>目录下面。</p>
<p>然后在php.ini配置文件里面加上以下内容：</p>
<pre><code>[XDebug]
zend_extension=&quot;D:\phpStudy\PHPTutorial\php\php-5.6.27-nts\ext\php_xdebug.dll&quot;
xdebug.profiler_append = 0
xdebug.profiler_enable = 1
xdebug.profiler_enable_trigger = 0
xdebug.profiler_output_dir=&quot;D:\phpStudy\PHPTutorial\tmp\xdebug&quot;
xdebug.trace_output_dir=&quot;D:\phpStudy\PHPTutorial\tmp\xdebug&quot;
xdebug.profiler_output_name = &quot;cache.out.%t-%s&quot;
xdebug.remote_enable = 1
xdebug.remote_handler = &quot;dbgp&quot;
xdebug.remote_host = &quot;127.0.0.1&quot;
xdebug.remote_port = 9000
xdebug.idekey = PHPSTORM
</code></pre><h3 id="phpstorm的设置">phpstorm的设置</h3>
<p>在phpstorm里面设置：
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/phpstorm2.png" alt=""></p>
<p>然后在debug的选项填上我们配置文件里面的端口：
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/phpstorm1.png" alt=""></p>
<p>配置proxy端口和IDE key，端口是你网站的端口，IDE key是我们配置文件里面的，应该一致：
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/phpstorm3.png" alt=""></p>
<p>然后配置我们的debug配置：
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/phpstorm4.png" alt="">
这里和我们网站的信息一样</p>
<p><img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/phpstorm5.png" alt=""></p>
<p>下面我是使用火狐的插件<code>xdebug-ext</code>进行调试，因为审计用得比较多的就是火狐了插件多哈。
IDE key也要对应上我们的配置：
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/phpstorm6.png" alt=""></p>
<h2 id="0x03-测试">0x03 测试</h2>
<p>这里我用dvwa来测试，我们先打开火狐xdebug-ext，然后打开phpstorm的debug模式，然后随便下个断点：
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/phpstorm7.png" alt=""></p>
<p><img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/phpstorm8.png" alt="">
然后我们访问程序，已经成功断下了：
<img src="https://pic-1252849007.cos.ap-guangzhou.myqcloud.com/phpstorm9.png" alt=""></p>
</div>
<div style="position: fixed; right:50px; max-width:255px; overflow:auto; top: 120px; width: 220px; bottom:90px">










<div class="toc">

    <div class="page-header"><strong>目录</strong></div>

    <div id="page-scrollspy" class="toc-nav">

        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x01-%e5%89%8d%e8%a8%80">
                            0x01 前言
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x02-%e9%85%8d%e7%bd%ae%e8%bf%87%e7%a8%8b">
                            0x02 配置过程
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#php%e7%9a%84%e9%85%8d%e7%bd%ae">
                            php的配置
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#phpstorm%e7%9a%84%e8%ae%be%e7%bd%ae">
                            phpstorm的设置
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                    </ul>
                    
                
            
        
        
            
                
                
                    
                    <ul class="nav">
                    
                    <ul class="nav">
                    
                    
                        <li class="nav-item">
                            <a class="nav-link text-left" href="#0x03-%e6%b5%8b%e8%af%95">
                            0x03 测试
                            </a>
                        </li>
                    
                    
                    </ul>
                    
                    </ul>
                    
                
            
        

    </div>

</div>



</div>

  </article>
</main>
<footer>
  <div>
    <div>&copy; 2021 F0rmat. <a href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC-BY-4.0</a></div>
  </div>
</footer>
</body>
</html>
